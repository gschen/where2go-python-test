summary: demo
id: 20200211-01-å¼ ç¥¯æ‚¦
categories: python
tags: 
status: Published 
authors: å¼ ç¥¯æ‚¦
Feedback Link: http://www.sctu.edu.cn

# 50è¡Œpythonä»£ç æ‹¯æ•‘â€œæ‡’ç™Œâ€

## å¥‡å¦™çš„å·¥å…·

åˆšåˆšå¼€å§‹å­¦pythonçš„æ—¶å€™ï¼Œè€å¸ˆå°±è¯´ç°ä»£æŠ€æœ¯çš„å‘å±•æœ€ç»ˆç›®çš„å°±æ˜¯ä¸ºäº†æ–¹ä¾¿ï¼Œè¯´ç™½äº†ï¼Œå°±æ˜¯å¤§å®¶éƒ½â€œæ‡’â€ï¼Œ æ‡’å¾—ä»€ä¹ˆäº‹æƒ…éƒ½äº²åŠ›äº²ä¸ºï¼Œå¦‚æœæœ‰å·¥å…·èƒ½å¸®åŠ©æˆ‘ä»¬åšäº‹ï¼Œå²‚ä¸å¦™å“‰ï¼Ÿ

![](assets/20200211-01-å¼ ç¥¯æ‚¦-01.png)

è€Œç°ä»£æ–‡æ˜çš„äº§ç‰©â€”â€”ç”µè„‘ï¼Œå°±å¯ä»¥æ›¿ä»£æˆ‘ä»¬äººåšå¾ˆå¤šäº‹æƒ…ã€‚è€Œåœ¨ä¼—å¤šçš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå°¤å…¶ä¸èƒ½æ”¾è¿‡Pythonè¿™ä¸ªå°å¦–ç²¾ï¼
çºµè§‚å››æµ·ï¼Œç¬”è€…ç»ˆäºæ‰¾åˆ°äº†ä¸€ç»„å¯ä»¥ç›´æ¥åˆ©ç”¨å¾®ä¿¡æ§åˆ¶ç”µè„‘å…³æœºçš„ä»£ç ï¼ï¼ˆä¸ºå•¥æˆ‘è‡ªå·±å†™ä¸å‡ºæ¥å‘¢ï¼Ÿå› ä¸ºâ€˜ç¨‹åºè®¾è®¡ï¼Œèœæ˜¯åŸç½ªâ€™ğŸ¶ï¼‰

## ç”¨åˆ°çš„åº“

### åˆ©ç”¨cmdï¼Œä¸‹è½½3ä¸ªç¬¬ä¸‰æ–¹åº“ï¼šitchatã€opencvã€matplotlib

ä¸‹è½½å‘½ä»¤ï¼špip install + åº“å

![](assets/20200211-01-å¼ ç¥¯æ‚¦-02.png)

ç”¨åŒæ ·çš„æ–¹å¼ä¸‹è½½å…¶ä»–çš„åº“ã€‚ç”¨pip listæ£€æŸ¥ç¬¬ä¸‰æ–¹åº“æ˜¯å¦å®‰è£…æˆåŠŸã€‚

![](assets/20200211-01-å¼ ç¥¯æ‚¦-03.png)

## å…¨éƒ¨ä»£ç  

``` python

#ä½œè€…ï¼šç—´æµ·
#é“¾æ¥ï¼šhttps://zhuanlan.zhihu.com/p/47676417
#æ¥æºï¼šçŸ¥ä¹
#è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚

import itchat
import os
import time
import cv2

sendMsg = u"{æ¶ˆæ¯åŠ©æ‰‹}ï¼šæš‚æ—¶æ— æ³•å›å¤"
usageMsg = u"ä½¿ç”¨æ–¹æ³•ï¼š\n1.è¿è¡ŒCMDå‘½ä»¤ï¼šcmd xxx (xxxä¸ºå‘½ä»¤)\n" \
           u"-ä¾‹å¦‚å…³æœºå‘½ä»¤:\ncmd shutdown -s -t 0 \n" \
           u"2.è·å–å½“å‰ç”µè„‘ç”¨æˆ·ï¼šcap\n3.å¯ç”¨æ¶ˆæ¯åŠ©æ‰‹(é»˜è®¤å…³é—­)ï¼šast\n" \
           u"4.å…³é—­æ¶ˆæ¯åŠ©æ‰‹ï¼šastc"
flag = 0 #æ¶ˆæ¯åŠ©æ‰‹å¼€å…³
nowTime = time.localtime()
filename = str(nowTime.tm_mday)+str(nowTime.tm_hour)+str(nowTime.tm_min)+str(nowTime.tm_sec)+".txt"
myfile = open(filename, 'w')

@itchat.msg_register('Text')
def text_reply(msg):
    global flag
    message = msg['Text']
    fromName = msg['FromUserName']
    toName = msg['ToUserName']

    if toName == "filehelper":
        if message == "cap":
            cap = cv2.VideoCapture(0)
            ret, img = cap.read()
            cv2.imwrite("weixinTemp.jpg", img)
            itchat.send('@img@%s'%u'weixinTemp.jpg', 'filehelper')
            cap.release()
        if message[0:3] == "cmd":
            os.system(message.strip(message[0:4]))
        if message == "ast":
            flag = 1
            itchat.send("æ¶ˆæ¯åŠ©æ‰‹å·²å¼€å¯", "filehelper")
        if message == "astc":
            flag = 0
            itchat.send("æ¶ˆæ¯åŠ©æ‰‹å·²å…³é—­", "filehelper")
    elif flag == 1:
        itchat.send(sendMsg, fromName)
        myfile.write(message)
        myfile.write("\n")
        myfile.flush()

if __name__ == '__main__':
    itchat.auto_login()
    itchat.send(usageMsg, "filehelper")
    itchat.run()


```
## è¿è¡Œæ•ˆæœ

ç‚¹å‡»F5è¿è¡Œï¼Œä¼šå‡ºç°ä¸€ä¸ªå¾®ä¿¡ç™»å½•çš„éªŒè¯äºŒç»´ç 

![](assets/20200211-01-å¼ ç¥¯æ‚¦-04.png)

ç”¨å¾®ä¿¡æ‰«æï¼Œç™»å½•å³å¯ã€‚

![](assets/20200211-01-å¼ ç¥¯æ‚¦-05.png)

![](assets/20200211-01-å¼ ç¥¯æ‚¦-06.png)

éšåï¼Œå¾®ä¿¡æ–‡ä»¶åŠ©æ‰‹å°±ä¼šå‘é€è¿™æ ·çš„å¯¹è¯æ¡†

ä¹‹åå°±å¯ä»¥å®ç°è¿œç¨‹æ“ä½œè¾£ï¼ï¼æ¯”å¦‚å½“ä½ é€‰æ‹©äº†â€œç¡çœ æ¨¡å¼â€ï¼Œä½†æ˜¯è¿‡äº†ä¸€æ®µæ—¶é—´ä½ è¦ç¡è§‰äº†ï¼Œä¸ç”¨ç”µè„‘éœ€è¦å…³æœºçš„æ—¶å€™ï¼Œä½ å°±å¯ä»¥ç”¨å¾®ä¿¡å®ç°è¿œç¨‹æ“ä½œäº†ï¼
